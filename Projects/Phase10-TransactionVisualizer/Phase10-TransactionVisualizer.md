<div dir="rtl" align='justify'>

# فاز ده: مصورسازی تراکنش‌ها

در این فاز قرار است که یک فایل حاوی دیتای تراکنش‌ها را از کاربر دریافت کنیم و تراکنش‌ها را در قالب یک گراف به کاربر نمایش دهیم. 

<br> 

## 1- چرا تراکنش‌ها را در قالب گراف نمایش دهیم؟
وقتی تحلیل‌گر روی داد‌ه‌های یک مساله‌ی خاص تمرکز می‌کند، نیاز دارد بتواند اطلاعات را در کنار یکدیگر ببیند، روابط بینشان را درک کند و کوئری‌ها را به راحتی روی آن‌ها پیاده‌سازی کند. گراف و ویژگی‌هایش، بهترین ساختار برای رسیدن به این اهداف‌ است.

<br> 

## 2- ساختار داده و تعریف اجزای آن به عنوان بخش‌های گراف
ما در این پروژه با داده‌های فرضی تراکنش‌های بانکی سر و کار داریم. مجموعه داده در ادامه به صورت یک فایل csv باید به برنامه داده‌شود. این داده‌ها شامل تعداد زیادی رکورد است. هر رکورد شامل اطلاعات زیر است:

1. شماره حساب مبدا
2. شماره حساب مقصد
3. مبلغ تراکنش
4. تاریخ تراکنش
5. شماره مرجع تراکنش

در شکل زیر یک نمونه از دیتابیس حاوی اطلاعات تراکنش را مشاهده می‌کنید.

<p align="center" style="width:70% text-align:center;" ><img src="dataBase.jpg" alt="Logo"  align="cneter"  style="center"></p>

در این فاز از پروژه ما قرار می‌گذاریم تا به هر یک از این 5 مورد بالا به طور خاصی نگاه کنیم. در دنیای پروژه ما هرچیزی به شکل یکی از این سه مورد زیر تعریف خواهد شد.

1. راس گراف
2. یال گراف
3. مشخصه یکی از دو مورد بالا

در این فاز قرارداد می‌کنیم که حساب مبدا و مقصد به صورت راس‌های گراف و تراکنش‌ بین‌ آن‌ها به صورت یال گراف نمایش داده شود. همچنین مقدار تراکنش‌ها و تاریخ تراکنش به عنوان مشخصه یال تراکنش باشند.


چیزی که در اینجا درباره آن صبحت کردیم، یعنی طرز نگرش به پدیده‌های پروژه و تعریف آن‌ها به صورت خاص، با اصطلاح آنتولوژی شناخته می‌شود. در فازهای بعدی خیلی بیشتر با آنتولوژی آشنا خواهیم شد.

<br> 

## 3- وارد‌ کردن مجموعه داده
دراین فاز یک فایل csv
سبک، حاوی تعدادی تراکنش با ساختار یاد شده در اختیار شما قرار می‌گیرد که بتوانید کار خود را روی آن امتحان کنید. همچنین یک مجموعه داده‌ی دیگر حاوی اطلاعات حساب‌ها در اخیتارتان قرار می‌گیرد.
می‌توانید این فایل‌ها را که زیپ شده‌اند از لینک‌ زیر دریافت کنید.

<a href="TestDB.zip" download>Click to Download</a>

<br> 

## 4- مصورسازی

با آموزش‌هایی که در ادامه داک آورده می‌شود، باید بتوانیم هر سطر موجود در پایگاه داده را که معادل یک تراکنش بانکی است، به صورت یک دمبل نشان دهیم. با پیاده‌سازی این ویژگی، امکان فراهم‌کردن بسیاری از قابلیت‌های پرکاربرد و ارزشمند  فراهم می‌شود.

در واقع ما سعی داریم چیزی شبیه به عکس زیر را پیاده‌سازی کنیم.

<p align="center" style="width:70% text-align:center;" ><img src="damble.jpg" alt="Logo"  align="cneter"  style="center"></p>

لازم به ذکر است که کادر موجود در بالای یال، نشان‌ دهنده‌ی لیست مشخصه‌هایی است که باید برای یال آورده شود. 

برای مثال در عکس زیر بخشی از نرم‌افزار تحلیلی شرکت DataWalk را مشاهده می‌کنید.

<p align="center" style="width:70% text-align:center;" ><img src="datawalk.png" alt="Logo"  align="cneter"  style="center"></p>

در این سیستم، شرکت ترجیح داده بجای یک دایره به عنوان راس گراف از آیکون مخصوص استفاده‌ کند. همچنین تراکنش بین دو حساب مختلف به صورت یال جهت‌دار آبی‌رنگ نشان داده‌شده‌است. این عکس چیزی فراتر از خواسته‌ این فاز را پیاده کرده و فقط یک تراکنش ساده نیست. همچنین از کل مشخصه‌های یال تراکنش، ترجیح داده‌اند فقط مقدار تراکنش را نشان‌ دهند. همچنین به‌جای نوشتن شماره حساب روی راس‌ها، اسم مالک حساب را آورده‌اند.

پیشنهاد می‌شود شماره حساب روی راس گراف نمایش داده شود تا در فاز  بعدی کار راحت‌تر باشد.

دست شما در پیاده‌سازی UI 
باز است و با رعایت چارچوپ اولیه، می‌توانید از شکل و رنگ‌های مختلف در طراحی المان‌ها استفاده‌کنید. 
ما با پیاده‌سازی این فاز، بعد از این که توانستیم هر رکورد را به صورت یک دمبل نشان بدهیم، آماده می‌شویم تا در آینده برنامه را به ابزارهای تحلیل مجهز کنیم.

<br> 

## 5- نمایش اطلاعات حساب 
بعد از این که دمبل یک تراکنش روی بوم گراف ظاهر شد، کاربری که از برنامه استفاده می‌کند باید این امکان را داشته باشد که با کلیک روی راس گراف، اطلاعات حساب را ببیند. برای این کار پیشنهاد می‌شود که بعد از کلیک، اطلاعات حساب از مجموعه داده دوم برداشته شود و در یک منو از سمت راست، کنار صفحه نمایان شود.

<br> 

## 6- کار با کتاب‌‌خانه Ogma
در بخش پایانی این فاز قرار است با OGMA کار کنیم.
این بخش برای آشنایی بیشتر است و کاری با مجموعه داده‌‌های قبلی نداریم. 

بدین صورت که به صورت رندوم گراف ایجاد می‌کنیم و با ابزار موجود دراین فریم‌ورک، گراف را layout می‌کنیم. 
توضیحات فنی پیاده‌سازی این فاز در ادامه داک آورده می‌شود.

<br> 

# بخش پیاده‌سازی 

کتاب‌خانه‌های زیادی برای نمایش گراف وجود دارد، شما می‌توانید برای مطالعه
بیشتر به این <a
href="https://medium.com/@Elise_Deux/the-list-of-graph-visualization-libraries-7a7b89aab6a6">صفحه</a>
مراجعه کنید.

با توجه به تحقیقات ما، بهترین کتاب‌خانه موجود برای پیاده‌سازی اهداف تیم ستاره کتاب‌خانه <strong>Ogma
</strong>است. برای آشنایی بیشتر با&nbsp;این محصول می‌توانید به این <a
href="https://doc.linkurio.us/ogma/latest/quickstart.html">سایت</a> مراجعه کنید.

<br> 

## 1- نمایش گراف به وسیله Ogma

<img
src="https://i1.wp.com/linkurio.us/wp-content/uploads/2016/10/Ogma-example-customization.png?ssl=1"
style="height:351px; width:800px">

تصویر بالا یک گراف کوچک است که به کمک اگما نمایش داده شده است. شاید برای
شما سوال پیش بیاید که نمایش گراف چه اهمیتی دارد، و چرا نرم‌افزار‌هایی نظیر <strong>Gephi</strong> برای زیبا
کشیدن گراف بوجود آمده است؟ (توصیه می‌شود این نرم‌افزار را نصب کنید و چیدمان‌های مختلف آن را امتحان کنید. از جمله
چیدمان‌های circular آن را که پیچیدگی زیادی دارند.)

<img alt="Features" src="https://gephi.org/images/screenshots/preview1.png">

چیدمانی خوب است که بتواند راس‌های مرتبط را کنار هم و راس‌های نامرتبط از
هم را با فاصله از هم قرار دهد، تا بتوان با یک نگاه اطلاعات زیادی بدست آورد. به طور مثال وقتی شما دو راس خاص
را در نظر دارید و می‌خواهید ببینید این دو راس چه میزان به هم مرتبط‌ هستند کافی است از یک چیدمان مناسب استفاده کنید.
محصول ستاره هم از چندین چیدمان مهم استفاده می‌کند.

<br> 

## 2- راه‌اندازی Ogma

در ابتدا <strong>ogma‌</strong> را داخل انگولار امتحان کنید و برای پیاده‌سازی آن به providing-ogma مراجعه کنید.

<a href="providing-ogma.md" download>لینک providing-ogma</a>

سپس یک گراف دلخواه را در آن نمایش دهید و توصیه می‌کنم برای اطمینان از صحت
پیاده‌سازی خود یک <strong>Button</strong> بگذارید که با فشرده شدن آن یک گراف رندوم جدید در صفحه گراف بوجود
بیاید.

<br>

### پینشهاد 1
برای زیبا‌تر شدن المنت‌های <strong>html</strong> و زیبایی <strong>template</strong> از کتاب‌خانه‌های css مانند <strong>semantic ui</strong> و
<strong>bootstrapt</strong> استفاده کنید و با توجه به سادگی که <strong>semantic</strong> دارد، آن را بیشتر
توصیه می‌کنیم.

برای اضافه شدن این کتاب‌خانه‌ها به پروژه انگولار <strong>cdn</strong> آن را از اینترنت دریافت کنید و در <strong>head</strong> فایل index.html پروژه انگولار خود قرار
دهید.

به طور مثال شما می‌توانید&nbsp;<strong>cdn</strong> سمنتیک را از <a
href="https://stackoverflow.com/questions/30281258/how-to-use-semantic-ui-cdn"><strong>اینجا
</strong></a>دریافت کنید.

شما باید بعد از پیاده‌سازی اگما بتوانید کارهای زیر را انجام دهید:

1- روی یک راس&nbsp;کلیک کرده و حالت <strong>selected</strong> آن را تغییر دهید.

2- با موس بتوانید تمامی راس‌های <strong>selected</strong> را جا‌به‌جا کنید.

در فاز‌های بعدی شما باید بتوانید کار‌های انیمیشنی بیشتری در <strong>ogma</strong> انجام دهید مثلا رنگ یال‌ها را تغییر دهید و در آن‌ها <strong>flow</strong> ایجاد کنید و یا در راس‌ها
<strong>pulse</strong> ایجاد کنید و بهتر است برای یادگیری آن‌ها در این فاز با <strong>api</strong> های
اگما آشنا شوید، به طور مثال توابع <strong>setAttributes</strong> می‌توانید نقش مهمی در این انیمیشن‌ها داشته
باشد که شما می‌توانید جزئیات آن را در این <a href="https://doc.linkurio.us/ogma/latest/api.html"><strong>صفحه
</strong></a>دنبال کنید.

<br>

### پیشنهاد 2
زمان‌هایی که می‌خواهید به کاربر پیامی نشان
دهید و یا مقداری را از او دریافت کنید می‌توانید از&nbsp;کتاب‌خانه Sweet alert 2 استفاده کنید، این کتاب‌خانه قدرتمند
با قابلیت‌های زیادی که در اختیار شما قرار می‌دهد کار را بسیار ساده می‌کند.

در نهایت شما باید بتوانید اطلاعات گراف را به کمک <strong>HttpClient
</strong>از سرور <strong>backend</strong> بگیرید و با اگما نمایش دهید، پس حواستان به نحوه پیاده‌سازی باشد
تا بعدا&nbsp;به مشکل نخورید. در فاز‌های بعدی هم سعی می‌کنم کتاب‌خانه‌های دیگری را که مفید هستند را معرفی
کنیم.
 </div>
